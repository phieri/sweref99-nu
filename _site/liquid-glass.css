/**
 * Apple Liquid Glass Design System
 * 
 * Features:
 * - Translucency and frosted glass effect using backdrop-filter
 * - Depth using box shadows
 * - Rounded corners and soft glows
 * - Smooth animations and transitions
 * - Follows Apple Human Interface Guidelines for layout
 * 
 * This design system is applied for Apple devices (iPhone, iPad, Mac).
 * 
 * References:
 * - https://developer.apple.com/design/human-interface-guidelines/layout
 */

/* ============================================================================
   LAYOUT FOUNDATIONS (Apple HIG)
   ============================================================================ */

:root {
	/* Apple HIG recommends maintaining consistent spacing */
	--spacing-unit: 8px;
	--spacing-xs: calc(var(--spacing-unit) * 1); /* 8px */
	--spacing-sm: calc(var(--spacing-unit) * 2); /* 16px */
	--spacing-md: calc(var(--spacing-unit) * 3); /* 24px */
	--spacing-lg: calc(var(--spacing-unit) * 4); /* 32px */
	--spacing-xl: calc(var(--spacing-unit) * 6); /* 48px */
	
	/* Typography scale */
	--font-size-base: 100%;
	--font-size-large: 120%;
	--font-size-xlarge: 150%;
	
	/* Layout constraints */
	--container-max-width: 768px;
	
	/* Component sizing */
	--coords-font-size: 1.5rem;
	--posmeta-font-size: 1.25rem;
	--spinner-size: 1rem;
	--spinner-border-width: 2px;
	
	/* Border radius (Apple uses generous corner radii) */
	--border-radius: 12px;
	--border-radius-lg: 16px;
	
	/* San Francisco font stack (system font) */
	font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text", "Helvetica Neue", Arial, sans-serif;
}

/* Responsive font sizing following Apple HIG */
@media (min-width: 576px) {
	:root {
		--font-size-base: 100%;
	}
}

@media (min-width: 768px) {
	:root {
		--font-size-base: 87.5%;
	}
	
	body {
		max-width: var(--container-max-width);
		margin: auto;
	}
	
	body > header,
	body > main,
	body > footer {
		max-width: var(--container-max-width);
		margin-left: auto;
		margin-right: auto;
	}
}

/* Typography hierarchy */
h1, h2, h3, h4, h5, h6 {
	font-weight: 600;
}

/**
 * Header styling per Apple HIG
 * Large titles should be prominent without container backgrounds
 */
header.container {
	background: transparent !important;
	backdrop-filter: none !important;
	-webkit-backdrop-filter: none !important;
	border: none !important;
	box-shadow: none !important;
	padding: var(--spacing-md) var(--spacing-sm);
	margin-bottom: var(--spacing-sm);
}

header h1 {
	font-weight: 700;
	font-size: 2rem;
	margin: 0;
	color: inherit;
	text-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
}

@media (prefers-color-scheme: dark) {
	header h1 {
		text-shadow: 0 2px 12px rgba(0, 0, 0, 0.4);
	}
}

/* ============================================================================
   GLASS MORPHISM EFFECTS
   ============================================================================ */

/**
 * Main container glass effect
 * Creates a frosted glass appearance with subtle transparency
 */
body {
	background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
	background-attachment: fixed;
}

@media (prefers-color-scheme: dark) {
	body {
		background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
	}
}

/**
 * Glass cards with backdrop filter
 * Fallback: Semi-transparent background for browsers without backdrop-filter support
 * Note: header.container is excluded - it should not have the glass box effect
 */
main.container,
footer.container,
details,
article,
dialog article {
	background: rgba(255, 255, 255, 0.15);
	backdrop-filter: blur(20px) saturate(180%);
	-webkit-backdrop-filter: blur(20px) saturate(180%);
	border: 1px solid rgba(255, 255, 255, 0.25);
	box-shadow: 
		0 8px 32px 0 rgba(31, 38, 135, 0.15),
		0 0 20px 0 rgba(255, 255, 255, 0.05);
	border-radius: 16px;
	transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

@media (prefers-color-scheme: dark) {
	main.container,
	footer.container,
	details,
	article,
	dialog article {
		background: rgba(0, 0, 0, 0.25);
		border: 1px solid rgba(255, 255, 255, 0.15);
		box-shadow: 
			0 8px 32px 0 rgba(0, 0, 0, 0.35),
			0 0 20px 0 rgba(255, 255, 255, 0.03);
	}
}

/**
 * Fallback for browsers that don't support backdrop-filter
 * Provides a solid semi-transparent background as alternative
 */
@supports not (backdrop-filter: blur(20px)) {
	main.container,
	footer.container,
	details,
	article,
	dialog article {
		background: rgba(255, 255, 255, 0.85);
	}
	
	@media (prefers-color-scheme: dark) {
		main.container,
		footer.container,
		details,
		article,
		dialog article {
			background: rgba(30, 30, 46, 0.9);
		}
	}
}

/* ============================================================================
   BUTTONS AND INTERACTIVE ELEMENTS
   ============================================================================ */

/**
 * Glassy button effect with soft glow
 * Includes hover and active states with smooth transitions
 */
button,
[type="button"],
[type="submit"],
[role="button"] {
	background: rgba(255, 255, 255, 0.2);
	backdrop-filter: blur(10px);
	-webkit-backdrop-filter: blur(10px);
	border: 1px solid rgba(255, 255, 255, 0.3);
	border-radius: 12px;
	box-shadow: 
		0 4px 16px 0 rgba(31, 38, 135, 0.15),
		inset 0 1px 0 0 rgba(255, 255, 255, 0.5);
	transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
	font-weight: 600;
	color: inherit;
}

button:hover,
[type="button"]:hover,
[type="submit"]:hover,
[role="button"]:hover {
	background: rgba(255, 255, 255, 0.3);
	box-shadow: 
		0 8px 24px 0 rgba(31, 38, 135, 0.25),
		inset 0 1px 0 0 rgba(255, 255, 255, 0.6),
		0 0 16px 0 rgba(255, 255, 255, 0.2);
	transform: translateY(-2px);
}

button:active,
[type="button"]:active,
[type="submit"]:active,
[role="button"]:active {
	transform: translateY(0);
	box-shadow: 
		0 2px 8px 0 rgba(31, 38, 135, 0.2),
		inset 0 1px 0 0 rgba(255, 255, 255, 0.4);
}

button:disabled,
[type="button"]:disabled,
[type="submit"]:disabled,
[role="button"]:disabled {
	background: rgba(128, 128, 128, 0.15);
	backdrop-filter: blur(10px);
	box-shadow: none;
	opacity: 0.5;
	cursor: not-allowed;
	transform: none;
}

@supports not (backdrop-filter: blur(10px)) {
	button,
	[type="button"],
	[type="submit"],
	[role="button"] {
		background: rgba(255, 255, 255, 0.7);
	}
}

/* ============================================================================
   DETAILS AND SUMMARY ELEMENTS
   ============================================================================ */

/**
 * Enhanced glass effect for details elements
 * Adds subtle depth and glow on hover
 */
details {
	margin-bottom: 1rem;
}

details:hover {
	box-shadow: 
		0 12px 40px 0 rgba(31, 38, 135, 0.2),
		0 0 24px 0 rgba(255, 255, 255, 0.08);
}

summary {
	cursor: pointer;
	font-weight: 600;
	padding: 0.75rem 1rem;
	border-radius: 12px;
	transition: all 0.2s ease;
}

summary:hover {
	background: rgba(255, 255, 255, 0.1);
}

/* ============================================================================
   TEXT AND TYPOGRAPHY
   ============================================================================ */

/**
 * Text styling for glass effect
 * Ensures readability against translucent backgrounds
 */
h1, h2, h3, h4, h5, h6 {
	color: inherit;
	text-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

@media (prefers-color-scheme: dark) {
	h1, h2, h3, h4, h5, h6 {
		text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
	}
}

/**
 * Coordinate and metadata displays
 * Enhanced readability with subtle shadows
 */
.coords,
.posmeta {
	background: rgba(255, 255, 255, 0.1);
	backdrop-filter: blur(8px);
	-webkit-backdrop-filter: blur(8px);
	padding: 0.75rem 1rem;
	border-radius: 10px;
	border: 1px solid rgba(255, 255, 255, 0.2);
	box-shadow: 0 4px 12px 0 rgba(31, 38, 135, 0.1);
	transition: all 0.2s ease;
}

.coords:hover,
.posmeta:hover {
	background: rgba(255, 255, 255, 0.15);
	box-shadow: 0 6px 16px 0 rgba(31, 38, 135, 0.15);
}

@supports not (backdrop-filter: blur(8px)) {
	.coords,
	.posmeta {
		background: rgba(255, 255, 255, 0.6);
	}
}

/* ============================================================================
   FOOTER AND NAVIGATION
   ============================================================================ */

/**
 * Footer with glass effect
 */
footer {
	margin-top: 2rem;
}

footer a {
	color: inherit;
	text-decoration: none;
	padding: 0.5rem 1rem;
	border-radius: 8px;
	background: rgba(255, 255, 255, 0.15);
	backdrop-filter: blur(10px);
	-webkit-backdrop-filter: blur(10px);
	border: 1px solid rgba(255, 255, 255, 0.2);
	transition: all 0.2s ease;
	display: inline-block;
}

footer a:hover {
	background: rgba(255, 255, 255, 0.25);
	box-shadow: 0 4px 12px 0 rgba(31, 38, 135, 0.15);
	transform: translateY(-2px);
}

@supports not (backdrop-filter: blur(10px)) {
	footer a {
		background: rgba(255, 255, 255, 0.6);
	}
}

/* ============================================================================
   DIALOG ELEMENTS
   ============================================================================ */

/**
 * Dialog with enhanced glass effect
 */
dialog {
	background: transparent;
	border: none;
	border-radius: 16px;
	box-shadow: 0 16px 64px 0 rgba(31, 38, 135, 0.25);
}

dialog::backdrop {
	background: rgba(0, 0, 0, 0.4);
	backdrop-filter: blur(8px);
	-webkit-backdrop-filter: blur(8px);
}

@supports not (backdrop-filter: blur(8px)) {
	dialog::backdrop {
		background: rgba(0, 0, 0, 0.6);
	}
}

/* ============================================================================
   SMOOTH ANIMATIONS
   ============================================================================ */

/**
 * Smooth fade-in animation for elements
 */
@keyframes fadeIn {
	from {
		opacity: 0;
		transform: translateY(10px);
	}
	to {
		opacity: 1;
		transform: translateY(0);
	}
}

.container,
details,
dialog {
	animation: fadeIn 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

/**
 * Pulsing glow effect for active elements
 */
@keyframes pulseGlow {
	0%, 100% {
		box-shadow: 
			0 8px 32px 0 rgba(31, 38, 135, 0.15),
			0 0 20px 0 rgba(255, 255, 255, 0.05);
	}
	50% {
		box-shadow: 
			0 8px 32px 0 rgba(31, 38, 135, 0.2),
			0 0 28px 0 rgba(255, 255, 255, 0.1);
	}
}

/* Apply subtle glow to focused interactive elements */
button:focus-visible,
a:focus-visible,
summary:focus-visible {
	outline: 2px solid rgba(255, 255, 255, 0.5);
	outline-offset: 2px;
	animation: pulseGlow 2s ease-in-out infinite;
}

/* ============================================================================
   UTILITY CLASSES (from stil.css)
   ============================================================================ */

/**
 * Out of range indicator (for accuracy/speed warnings)
 */
.outofrange {
	color: #DC143C; /* crimson for better visibility on glass background */
	font-weight: 500;
}

@media (prefers-color-scheme: dark) {
	.outofrange {
		color: #FFCCCB;
	}
}

/**
 * Coordinate and metadata font sizing
 */
.posmeta {
	font-size: var(--posmeta-font-size);
}

/**
 * Speed element with click interaction for unit cycling
 */
#speed {
	cursor: pointer;
	user-select: none;
	-webkit-user-select: none;
	-moz-user-select: none;
	-ms-user-select: none;
}

#speed:hover {
	opacity: 0.8;
}

.coords {
	font-size: var(--coords-font-size);
}

/**
 * Spinner animation for delayed position updates
 */
#timestamp::after {
	content: "";
	display: none;
	position: relative;
	width: var(--spinner-size);
	height: var(--spinner-size);
	margin-left: 0.5rem;
	border: var(--spinner-border-width) solid rgba(255, 255, 255, 0.6);
	border-top-color: transparent;
	border-radius: 50%;
	animation: spinner-rotate 0.8s linear infinite;
	vertical-align: middle;
}

#timestamp.loading::after {
	display: inline-block;
}

@keyframes spinner-rotate {
	from {
		transform: rotate(0deg);
	}
	to {
		transform: rotate(360deg);
	}
}
