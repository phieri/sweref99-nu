/**
 * Material Design 3 inspired styling for SWEREF 99 TM
 * Based on Material Design 3 guidelines
 * Reference: https://m3.material.io/
 */

:root {
	/* Material Design 3 spacing (8dp base unit = 8px) */
	--md-spacing-xs: 0.25rem;  /* 4px - half unit */
	--md-spacing-sm: 0.5rem;   /* 8px - base unit */
	--md-spacing-md: 1rem;     /* 16px - 2x base */
	--md-spacing-lg: 1.5rem;   /* 24px - 3x base */
	--md-spacing-xl: 2rem;     /* 32px - 4x base */
	
	/* Material Design 3 color system */
	--md-error-light: #B3261E;
	--md-error-dark: #F2B8B5;
	
	/* Typography scale based on Material Design 3 */
	--pico-font-size: 100%;
	--pico-line-height: 1.5;
	
	/* Component sizing */
	--coords-font-size: 1.5rem;
	--posmeta-font-size: 1.125rem;
	--spinner-size: 1rem;
	--spinner-border-width: 2px;
	--container-max-width: 768px;
	
	/* Material Design 3 shape system */
	--md-corner-none: 0;
	--md-corner-xs: 0.25rem;   /* 4px */
	--md-corner-sm: 0.5rem;    /* 8px */
	--md-corner-md: 0.75rem;   /* 12px */
	--md-corner-lg: 1rem;      /* 16px */
	--md-corner-xl: 1.75rem;   /* 28px */
	
	--pico-border-radius: var(--md-corner-md);
	--pico-form-element-spacing-vertical: var(--md-spacing-sm);
	--pico-form-element-spacing-horizontal: var(--md-spacing-md);
	
	/* Material Design 3 font family */
	font-family: 
		Roboto,
		"Segoe UI",
		-apple-system,
		BlinkMacSystemFont,
		"Helvetica Neue",
		Arial,
		"Noto Sans",
		sans-serif,
		"Apple Color Emoji",
		"Segoe UI Emoji",
		"Segoe UI Symbol",
		"Noto Color Emoji";
}

/* Responsive typography following Material Design breakpoints */
@media (min-width: 600px) {
	:root {
		--pico-font-size: 100%;
	}
}

@media (min-width: 840px) {
	:root {
		--pico-font-size: 100%;
	}
	
	body {
		max-width: var(--container-max-width);
		margin: auto;
	}
	
	body > header,
	body > main,
	body > footer {
		max-width: var(--container-max-width);
		margin-left: auto;
		margin-right: auto;
	}
}

/* Material Design 3 typography - emphasis and hierarchy */
h1, h2, h3, h4, h5, h6 {
	--pico-font-weight: 500;
	letter-spacing: 0;
}

h1 {
	font-size: 2rem;
	line-height: 2.5rem;
	font-weight: 400;
}

header h1 {
	font-weight: 500;
	margin-bottom: var(--md-spacing-md);
}

header.container {
	margin-bottom: var(--md-spacing-lg);
}

/* Material Design 3 surfaces - Outlined Card variant
 * Uses a 1dp border with subtle elevation for emphasis
 * Reference: https://m3.material.io/components/cards/specs
 */
article {
	/* Material outlined card: 1dp border with visible outline */
	border: 1px solid rgba(0, 0, 0, 0.12);
	border-radius: var(--md-corner-lg);
	/* Subtle elevation for depth (elevation level 0-1) */
	box-shadow: 
		0 1px 2px 0 rgba(0, 0, 0, 0.05),
		0 1px 3px 0 rgba(0, 0, 0, 0.1);
	transition: 
		box-shadow 0.28s cubic-bezier(0.4, 0, 0.2, 1),
		border-color 0.28s cubic-bezier(0.4, 0, 0.2, 1);
}

article:hover {
	/* Enhanced border and subtle elevation on hover */
	border-color: var(--pico-primary);
	box-shadow: 
		0 2px 4px 0 rgba(0, 0, 0, 0.08),
		0 3px 6px 0 rgba(0, 0, 0, 0.12);
}

article>footer {
	border-radius: 0 0 var(--md-corner-lg) var(--md-corner-lg);
}

@media (prefers-color-scheme: dark) {
	article {
		/* Adjusted border and shadow for dark theme */
		border-color: rgba(255, 255, 255, 0.12);
		box-shadow: 
			0 1px 3px 0 rgba(0, 0, 0, 0.2),
			0 1px 2px 0 rgba(0, 0, 0, 0.24);
	}
	
	article:hover {
		box-shadow: 
			0 2px 6px 0 rgba(0, 0, 0, 0.26),
			0 3px 8px 0 rgba(0, 0, 0, 0.28);
	}
}

/* Material Design 3 color system */
.outofrange {
	color: var(--md-error-light);
}

@media (prefers-color-scheme: dark) {
	.outofrange {
		color: var(--md-error-dark);
	}
}

/* Typography utilities */
.posmeta {
	font-size: var(--posmeta-font-size);
	line-height: 1.5;
}

.coords {
	font-size: var(--coords-font-size);
	font-weight: 400;
	line-height: 1.25;
}

/* Interactive elements - Material Design state layers */
#speed {
	cursor: pointer;
	user-select: none;
	-webkit-user-select: none;
	-moz-user-select: none;
	-ms-user-select: none;
	transition: opacity 0.2s cubic-bezier(0.4, 0, 0.2, 1);
	border-radius: var(--md-corner-sm);
	padding: var(--md-spacing-xs) var(--md-spacing-sm);
	margin: calc(-1 * var(--md-spacing-xs)) calc(-1 * var(--md-spacing-sm));
}

#speed:hover {
	opacity: 0.85;
	background-color: rgba(0, 0, 0, 0.04);
}

@media (prefers-color-scheme: dark) {
	#speed:hover {
		background-color: rgba(255, 255, 255, 0.08);
	}
}

#speed:active {
	opacity: 0.7;
	background-color: rgba(0, 0, 0, 0.08);
}

@media (prefers-color-scheme: dark) {
	#speed:active {
		background-color: rgba(255, 255, 255, 0.12);
	}
}

/* Material Design spinner with smooth animation */
#timestamp::after {
	content: "";
	display: none;
	position: relative;
	width: var(--spinner-size);
	height: var(--spinner-size);
	margin-left: var(--md-spacing-sm);
	border: var(--spinner-border-width) solid var(--pico-secondary);
	border-top-color: transparent;
	border-radius: 50%;
	animation: spinner-rotate 1s cubic-bezier(0.4, 0, 0.2, 1) infinite;
	vertical-align: middle;
}

#timestamp.loading::after {
	display: inline-block;
}

@keyframes spinner-rotate {
	from {
		transform: rotate(0deg);
	}
	to {
		transform: rotate(360deg);
	}
}

/* Material Design motion - reduce for accessibility */
@media (prefers-reduced-motion: reduce) {
	*,
	*::before,
	*::after {
		animation-duration: 0.01ms !important;
		animation-iteration-count: 1 !important;
		transition-duration: 0.01ms !important;
	}
}
